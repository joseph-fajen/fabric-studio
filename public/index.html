<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Fabric Processor</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üåä Deep Sea Video Analysis Lab</h1>
            <p>Submerge videos into the depths of comprehensive fabric pattern analysis</p>
        </header>

        <main>
            <section class="input-section">
                <div class="input-group">
                    <label for="youtube-url">YouTube Video URL</label>
                    <input 
                        type="url" 
                        id="youtube-url" 
                        placeholder="https://www.youtube.com/watch?v=..."
                        required
                    >
                </div>
                
                <button id="process-btn" class="process-btn">
                    üî¨ Initiate Deep Analysis
                </button>
            </section>

            <section id="status-section" class="status-section hidden">
                <div class="status-header">
                    <h2>üì° Deep Sea Analysis Status</h2>
                    <div id="status-badge" class="status-badge">‚ö° Initializing Sonar</div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                    <div class="progress-text">
                        <span id="progress-current">0</span> of <span id="progress-total">13</span> patterns
                    </div>
                </div>

                <div class="current-step">
                    <h3>üîç Active Scan Sequence</h3>
                    <div id="current-pattern" class="pattern-info">
                        <span class="pattern-name">Calibrating Sensors...</span>
                        <span class="pattern-description">Preparing deep sea analysis chamber</span>
                    </div>
                </div>

                <div class="phases-grid">
                    <div class="phase-card" data-phase="1">
                        <h4>üåä Phase 1: Specimen Collection</h4>
                        <div class="phase-patterns">
                            <div class="pattern-item" data-pattern="youtube_summary">youtube_summary</div>
                            <div class="pattern-item" data-pattern="extract_core_message">extract_core_message</div>
                        </div>
                    </div>
                    
                    <div class="phase-card" data-phase="2">
                        <h4>üî¨ Phase 2: Deep Laboratory Analysis</h4>
                        <div class="phase-patterns">
                            <div class="pattern-item" data-pattern="extract_wisdom">extract_wisdom</div>
                            <div class="pattern-item" data-pattern="extract_insights">extract_insights</div>
                            <div class="pattern-item" data-pattern="extract_ideas">extract_ideas</div>
                            <div class="pattern-item" data-pattern="extract_patterns">extract_patterns</div>
                            <div class="pattern-item" data-pattern="extract_recommendations">extract_recommendations</div>
                            <div class="pattern-item" data-pattern="extract_predictions">extract_predictions</div>
                        </div>
                    </div>
                    
                    <div class="phase-card" data-phase="3">
                        <h4>üß¨ Phase 3: Neural Network Mapping</h4>
                        <div class="phase-patterns">
                            <div class="pattern-item" data-pattern="extract_references">extract_references</div>
                            <div class="pattern-item" data-pattern="extract_questions">extract_questions</div>
                            <div class="pattern-item" data-pattern="create_tags">create_tags</div>
                        </div>
                    </div>
                    
                    <div class="phase-card" data-phase="4">
                        <h4>Phase 4: Synthesis Materials</h4>
                        <div class="phase-patterns">
                            <div class="pattern-item" data-pattern="create_5_sentence_summary">create_5_sentence_summary</div>
                            <div class="pattern-item" data-pattern="to_flashcards">to_flashcards</div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="results-section" class="results-section hidden">
                <div class="results-header">
                    <h2>Results Ready</h2>
                    <div class="results-summary">
                        <span id="results-count">13</span> analysis files generated
                    </div>
                </div>
                
                <div class="download-section">
                    <button id="download-btn" class="download-btn">
                        üì• Download Analysis Files
                    </button>
                    <p class="download-info">
                        Files are provided as text files (.txt) with professional markdown formatting
                    </p>
                </div>
            </section>

            <section id="error-section" class="error-section hidden">
                <div class="error-header">
                    <h2>Processing Error</h2>
                </div>
                <div id="error-message" class="error-message">
                    An error occurred during processing.
                </div>
                <button id="retry-btn" class="retry-btn">Try Again</button>
            </section>
        </main>

        <footer>
            <div class="system-info">
                <span id="fabric-status">Checking fabric availability...</span>
                <span class="separator">‚Ä¢</span>
                <span>13 fabric patterns available</span>
                <span class="separator">‚Ä¢</span>
                <button id="management-toggle" class="management-toggle">‚öôÔ∏è Management</button>
            </div>
        </footer>

        <!-- Management Panel Modal -->
        <div id="management-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üõ†Ô∏è Server Management</h2>
                    <button id="close-management" class="close-btn">&times;</button>
                </div>
                
                <div class="modal-body">
                    <div class="management-tabs">
                        <button class="tab-btn active" data-tab="status">üìä Status</button>
                        <button class="tab-btn" data-tab="history">üìÅ History</button>
                        <button class="tab-btn" data-tab="cleanup">üßπ Cleanup</button>
                        <button class="tab-btn" data-tab="control">üéõÔ∏è Control</button>
                    </div>

                    <!-- Status Tab -->
                    <div id="status-tab" class="tab-content active">
                        <div class="status-grid">
                            <div class="status-card">
                                <h3>Server Status</h3>
                                <div class="status-item">
                                    <span class="label">Uptime:</span>
                                    <span id="server-uptime">-</span>
                                </div>
                                <div class="status-item">
                                    <span class="label">Memory Usage:</span>
                                    <span id="memory-usage">-</span>
                                </div>
                                <div class="status-item">
                                    <span class="label">Fabric Available:</span>
                                    <span id="fabric-available">-</span>
                                </div>
                            </div>
                            
                            <div class="status-card">
                                <h3>Active Processes</h3>
                                <div class="status-item">
                                    <span class="label">Running:</span>
                                    <span id="active-processes">-</span>
                                </div>
                                <div id="process-list" class="process-list"></div>
                            </div>
                        </div>
                    </div>

                    <!-- History Tab -->
                    <div id="history-tab" class="tab-content">
                        <div class="history-controls">
                            <button id="refresh-history" class="refresh-btn">üîÑ Refresh</button>
                            <span class="history-count">Loading...</span>
                        </div>
                        <div id="history-list" class="history-list">
                            <div class="loading">Loading history...</div>
                        </div>
                    </div>

                    <!-- Cleanup Tab -->
                    <div id="cleanup-tab" class="tab-content">
                        <div class="cleanup-section">
                            <h3>üßπ Storage Cleanup</h3>
                            <p>Remove old analysis files to free up space</p>
                            
                            <div class="cleanup-controls">
                                <div class="cleanup-option">
                                    <label for="cleanup-days">Remove files older than:</label>
                                    <select id="cleanup-days">
                                        <option value="7">7 days</option>
                                        <option value="30" selected>30 days</option>
                                        <option value="90">90 days</option>
                                    </select>
                                    <button id="cleanup-old-btn" class="cleanup-btn">Remove Old Files</button>
                                </div>
                            </div>
                            
                            <div class="cleanup-warning">
                                <p><strong>‚ö†Ô∏è Warning:</strong> This action cannot be undone. Files will be permanently deleted.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Control Tab -->
                    <div id="control-tab" class="tab-content">
                        <div class="control-section">
                            <h3>üéõÔ∏è Server Control</h3>
                            <p>Manage server operations and restart with optimizations</p>
                            
                            <div class="control-grid">
                                <div class="control-card">
                                    <h4>üîÑ Restart Server</h4>
                                    <p>Restart with the new optimized processing engine</p>
                                    <button id="restart-server-btn" class="control-btn restart-btn">
                                        üîÑ Restart Server
                                    </button>
                                </div>
                                
                                <div class="control-card">
                                    <h4>üõë Shutdown Server</h4>
                                    <p>Gracefully stop the server (requires manual restart)</p>
                                    <button id="shutdown-server-btn" class="control-btn shutdown-btn">
                                        üõë Shutdown Server
                                    </button>
                                </div>
                                
                                <div class="control-card">
                                    <h4>‚ö° Force Stop Processing</h4>
                                    <p>Stop all active video processing jobs</p>
                                    <button id="stop-processing-btn" class="control-btn stop-btn">
                                        ‚ö° Stop All Processing
                                    </button>
                                </div>
                            </div>
                            
                            <div class="control-warning">
                                <p><strong>‚ö†Ô∏è Warning:</strong> Shutdown requires manual restart from command line.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>